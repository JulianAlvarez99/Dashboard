{# ── Filters Panel (Sidebar) ──
     Expects: filters (list of filter dicts from context)
     Parent Alpine scope: dashboardApp()
#}
<aside
  class="w-80 bg-surface-900 border-r border-surface-700/60 flex flex-col shrink-0 overflow-y-auto transition-all duration-300"
  :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'">

  <!-- Sidebar header -->
  <div class="px-5 pt-5 pb-3 border-b border-surface-700/40">
    <div class="flex items-center justify-between">
      <h2 class="text-sm font-semibold text-gray-200 uppercase tracking-wider flex items-center gap-2">
        <i data-lucide="sliders-horizontal" class="w-4 h-4 text-accent-400"></i>
        Filtros
      </h2>
      <button @click="resetFilters()" class="text-xs text-gray-500 hover:text-accent-400 transition-colors cursor-pointer flex items-center gap-1" title="Restablecer filtros">
        <i data-lucide="rotate-ccw" class="w-3 h-3"></i>
        <span>Reset</span>
      </button>
    </div>
  </div>

  <!-- Dynamic Filter Controls -->
  <div class="flex-1 px-5 py-4 space-y-5">
    {% for f in filters %}
    <div class="animate-fade-in" style="animation-delay: {{ loop.index0 * 40 }}ms">
      {% include 'dashboard/partials/filters/_filter_' + f.filter_type + '.html' ignore missing %}
    </div>
    {% endfor %}
  </div>

  <!-- Apply button -->
  <div class="px-5 py-4 border-t border-surface-700/40">
    <button @click="applyFilters()"
      :disabled="loading"
      class="w-full py-2.5 bg-accent-600 hover:bg-accent-500 disabled:opacity-50
             text-white text-sm font-semibold rounded-lg transition-all duration-200
             shadow-glow-sm hover:shadow-glow cursor-pointer flex items-center justify-center gap-2">
      <template x-if="!loading">
        <span class="flex items-center gap-2">
          <i data-lucide="play" class="w-4 h-4"></i>
          Aplicar Filtros
        </span>
      </template>
      <template x-if="loading">
        <span class="flex items-center gap-2">
          <svg class="animate-spin w-4 h-4" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"/></svg>
          Procesando…
        </span>
      </template>
    </button>
  </div>
</aside>
