{# ── Line Status Indicator Widget partial ──
     Expects: wid from parent loop
     Data shape: { lines: [{line_id, line_name, line_code, status, output_count, last_detection, minutes_since}] }
#}
<div x-show="widgetResults['{{ wid }}'] && widgetResults['{{ wid }}'].data && !(widgetResults['{{ wid }}'].metadata && widgetResults['{{ wid }}'].metadata.empty)"
     x-cloak class="widget-card-body">
  <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3"
      x-text="widgetResults['{{ wid }}']?.widget_name"></h3>
  <div class="space-y-2">
    <template x-for="line in (widgetResults['{{ wid }}']?.data?.lines || [])" :key="line.line_id">
      <div class="flex items-center justify-between p-3 rounded-lg bg-surface-800 border border-surface-700/40">
        <div class="flex items-center gap-3">
          <span class="w-2.5 h-2.5 rounded-full shrink-0"
                :class="line.status === 'active' ? 'bg-green-500 animate-pulse'
                       : line.status === 'idle'  ? 'bg-yellow-500'
                       : 'bg-gray-600'"></span>
          <div>
            <p class="text-sm font-medium text-white" x-text="line.line_name"></p>
            <p class="text-[10px] text-gray-500 font-mono" x-text="line.line_code"></p>
          </div>
        </div>
        <div class="text-right">
          <p class="text-sm font-semibold text-white"
             x-text="line.output_count.toLocaleString('es-AR') + ' uds'"></p>
          <p class="text-[10px] text-gray-500" x-text="'Última: ' + line.last_detection"></p>
        </div>
      </div>
    </template>
  </div>
</div>
