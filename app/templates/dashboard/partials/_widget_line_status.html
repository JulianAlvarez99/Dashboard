{# ── Line Status Widget partial ──
     Expects: wid (from parent loop)
#}
<div x-show="widgetResults['{{ wid }}'] && widgetResults['{{ wid }}'].data && !(widgetResults['{{ wid }}'].metadata && widgetResults['{{ wid }}'].metadata.empty)"
     x-cloak class="widget-body">
    <h3 class="widget-title mb-3" x-text="widgetResults['{{ wid }}']?.widget_name"></h3>
    <div class="space-y-3">
        <template x-for="line in (widgetResults['{{ wid }}']?.data?.lines || [])" :key="line.line_id">
            <div class="flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50">
                <div class="flex items-center gap-3">
                    <span class="w-3 h-3 rounded-full"
                          :class="line.status === 'active' ? 'bg-green-500 animate-pulse' : line.status === 'idle' ? 'bg-yellow-500' : 'bg-gray-500'"></span>
                    <div>
                        <p class="font-medium text-gray-900 dark:text-white" x-text="line.line_name"></p>
                        <p class="text-xs text-gray-500" x-text="line.line_code"></p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-sm font-semibold text-gray-900 dark:text-white"
                       x-text="line.output_count.toLocaleString('es-AR') + ' uds'"></p>
                    <p class="text-xs text-gray-500" x-text="'Última: ' + line.last_detection"></p>
                </div>
            </div>
        </template>
    </div>
</div>
